/*C12*/SET SCHEMA PUBLIC
SET SCHEMA "PUBLIC"
drop table if exists receipt_types cascade 
drop table if exists reimbursements cascade 
drop table if exists user_costs cascade 
drop table if exists user_groups cascade 
drop table if exists user_groups_receipt_types cascade 
drop table if exists users cascade 
create table receipt_types (id integer generated by default as identity (start with 1), max_value float(53) not null, name varchar(255), primary key (id))
create table reimbursements (distance integer not null, end_date date, id integer generated by default as identity (start with 1), pushed_to_accept boolean not null, start_date date, user_id integer, name varchar(255), primary key (id))
create table user_costs (cost_value float(53) not null, id integer generated by default as identity (start with 1), receipt_type_id integer, reimbursement_id integer, name varchar(255), primary key (id))
create table user_groups (cost_per_km float(53) not null, daily_allowance float(53) not null, id integer generated by default as identity (start with 1), max_mileage float(53) not null, max_refund float(53) not null, name varchar(255), primary key (id))
create table user_groups_receipt_types (receipt_type_id integer not null, user_group_id integer not null, primary key (receipt_type_id, user_group_id))
create table users (id integer generated by default as identity (start with 1), user_group_id integer, name varchar(255), primary key (id))
alter table reimbursements add constraint FK7qdysg0ih8qre18p2wmjbuufc foreign key (user_id) references users
alter table user_costs add constraint FK1dloa8m3r2wcpo17yjacy2ls1 foreign key (receipt_type_id) references receipt_types
alter table user_costs add constraint FK8b4xytbhegah1tmqpsa48qafk foreign key (reimbursement_id) references reimbursements
alter table user_groups_receipt_types add constraint FKfvlobrh1etmxwij3ygtm5ly00 foreign key (receipt_type_id) references receipt_types
alter table user_groups_receipt_types add constraint FK9ocj3urytf3fhjn3p8f8jg0fg foreign key (user_group_id) references user_groups
alter table users add constraint FK5exbg1aqwx4y94fk3md3ji5sf foreign key (user_group_id) references user_groups
drop table if exists USER_COSTS
drop table if exists USER_GROUPS_RECEIPT_TYPES
drop table if exists RECEIPT_TYPES
drop table if exists REIMBURSEMENTS
drop table if exists USERS
drop table if exists USER_GROUPS
create table USER_GROUPS ( id int GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY, name varchar(100) not null, daily_allowance DOUBLE DEFAULT 0.00, cost_per_km DOUBLE DEFAULT 0.00, max_mileage DOUBLE DEFAULT 0.00, max_refund DOUBLE DEFAULT 0.00 )
create table USERS ( id int GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY, name varchar(100) not null , user_group_id int null, foreign key (user_group_id) references USER_GROUPS (id) )
create table REIMBURSEMENTS( id int GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY, name varchar(100) not null, start_date date default null, end_date date not null, distance int default 0.00, pushed_to_accept bit default false, user_id int not null , foreign key (user_id) references USERS (id) )
CREATE TABLE RECEIPT_TYPES (id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY, name VARCHAR(100) NOT NULL, max_value DECIMAL(10,2) DEFAULT 0.00 NOT NULL )
create table USER_GROUPS_RECEIPT_TYPES ( user_group_id int not null, receipt_type_id int not null, primary key (user_group_id, receipt_type_id), foreign key (user_group_id) references USER_GROUPS (id), foreign key (receipt_type_id) references RECEIPT_TYPES(id) )
CREATE TABLE USER_COSTS (id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY, name VARCHAR(100) NOT NULL, cost_value DECIMAL(10,2) DEFAULT 0.00 NOT NULL, receipt_type_id int not null, foreign key (receipt_type_id) references RECEIPT_TYPES (id), reimbursement_id int not null, foreign key (reimbursement_id) references REIMBURSEMENTS (id) )
INSERT INTO USER_GROUPS VALUES(1,'CEO',0.0E0,0.0E0,0.0E0,0.0E0)
INSERT INTO USER_GROUPS VALUES(2,'Sellers',0.0E0,0.0E0,0.0E0,0.0E0)
INSERT INTO USER_GROUPS VALUES(3,'Regular employee',0.0E0,0.0E0,0.0E0,0.0E0)
INSERT INTO USER_GROUPS VALUES(4,'Office employee',0.0E0,0.0E0,0.0E0,0.0E0)
INSERT INTO USER_GROUPS VALUES(5,'Employee without receipts',0.0E0,0.0E0,0.0E0,0.0E0)
INSERT INTO RECEIPT_TYPES VALUES(1,'Train_AllUsers',100.00)
INSERT INTO RECEIPT_TYPES VALUES(2,'Aeroplane_CEO',2000.00)
INSERT INTO RECEIPT_TYPES VALUES(3,'Food_AllUsers',45.00)
INSERT INTO RECEIPT_TYPES VALUES(4,'Food_CEO',450.00)
INSERT INTO RECEIPT_TYPES VALUES(5,'Hotels_Sellers',450.00)
INSERT INTO RECEIPT_TYPES VALUES(6,'Other_Directors',450.00)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(1,1)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(2,1)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(3,1)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(4,1)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(1,2)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(1,3)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(2,3)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(3,3)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(4,3)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(1,4)
INSERT INTO USER_GROUPS_RECEIPT_TYPES VALUES(2,5)
COMMIT
drop table if exists receipt_types cascade 
drop table if exists reimbursements cascade 
drop table if exists user_costs cascade 
drop table if exists user_groups cascade 
drop table if exists user_groups_receipt_types cascade 
drop table if exists users cascade 
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
